<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Categorial Variables | Introduction to Econometrics with R</title>
  <meta name="description" content="SciencesPo UG Econometrics online textbook. Almost no Maths." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Categorial Variables | Introduction to Econometrics with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://scpoecon.github.io/ScPoEconometrics/" />
  
  <meta property="og:description" content="SciencesPo UG Econometrics online textbook. Almost no Maths." />
  <meta name="github-repo" content="ScPoEcon/ScPoEconometrics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Categorial Variables | Introduction to Econometrics with R" />
  
  <meta name="twitter:description" content="SciencesPo UG Econometrics online textbook. Almost no Maths." />
  

<meta name="author" content="Florian Oswald, Jean-Marc Robin and Vincent Viers" />


<meta name="date" content="2019-09-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.gif" type="image/x-icon" />
<link rel="prev" href="multiple-reg.html"/>
<link rel="next" href="std-errors.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.46.1/plotly-latest.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-41584331-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-41584331-4');
</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">ScPo 2nd Year Econometrics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a></li>
<li class="chapter" data-level="1" data-path="R-intro.html"><a href="R-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction to <code>R</code></a><ul>
<li class="chapter" data-level="1.1" data-path="R-intro.html"><a href="R-intro.html#getting-started"><i class="fa fa-check"></i><b>1.1</b> Getting Started</a></li>
<li class="chapter" data-level="1.2" data-path="R-intro.html"><a href="R-intro.html#starting-r-and-rstudio"><i class="fa fa-check"></i><b>1.2</b> Starting R and RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="R-intro.html"><a href="R-intro.html#basic-calculations"><i class="fa fa-check"></i><b>1.3</b> Basic Calculations</a></li>
<li class="chapter" data-level="1.4" data-path="R-intro.html"><a href="R-intro.html#getting-help"><i class="fa fa-check"></i><b>1.4</b> Getting Help</a></li>
<li class="chapter" data-level="1.5" data-path="R-intro.html"><a href="R-intro.html#installing-packages"><i class="fa fa-check"></i><b>1.5</b> Installing Packages</a></li>
<li class="chapter" data-level="1.6" data-path="R-intro.html"><a href="R-intro.html#code-output"><i class="fa fa-check"></i><b>1.6</b> <code>Code</code> vs Output in this Book</a></li>
<li class="chapter" data-level="1.7" data-path="R-intro.html"><a href="R-intro.html#install-package"><i class="fa fa-check"></i><b>1.7</b> <code>ScPoEconometrics</code> Package</a></li>
<li class="chapter" data-level="1.8" data-path="R-intro.html"><a href="R-intro.html#data-types"><i class="fa fa-check"></i><b>1.8</b> Data Types</a></li>
<li class="chapter" data-level="1.9" data-path="R-intro.html"><a href="R-intro.html#data-structures"><i class="fa fa-check"></i><b>1.9</b> Data Structures</a></li>
<li class="chapter" data-level="1.10" data-path="R-intro.html"><a href="R-intro.html#dataframes"><i class="fa fa-check"></i><b>1.10</b> Data Frames</a></li>
<li class="chapter" data-level="1.11" data-path="R-intro.html"><a href="R-intro.html#programming-basics"><i class="fa fa-check"></i><b>1.11</b> Programming Basics</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sum.html"><a href="sum.html"><i class="fa fa-check"></i><b>2</b> Working With Data</a><ul>
<li class="chapter" data-level="2.1" data-path="sum.html"><a href="sum.html#summary-statistics"><i class="fa fa-check"></i><b>2.1</b> Summary Statistics</a></li>
<li class="chapter" data-level="2.2" data-path="sum.html"><a href="sum.html#plotting"><i class="fa fa-check"></i><b>2.2</b> Plotting</a></li>
<li class="chapter" data-level="2.3" data-path="sum.html"><a href="sum.html#summarize-two"><i class="fa fa-check"></i><b>2.3</b> Summarizing Two Variables</a></li>
<li class="chapter" data-level="2.4" data-path="sum.html"><a href="sum.html#the-tidyverse"><i class="fa fa-check"></i><b>2.4</b> The <code>tidyverse</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="linreg.html"><a href="linreg.html"><i class="fa fa-check"></i><b>3</b> Linear Regression</a><ul>
<li class="chapter" data-level="3.1" data-path="linreg.html"><a href="linreg.html#how-are-x-and-y-related"><i class="fa fa-check"></i><b>3.1</b> How are <code>x</code> and <code>y</code> related?</a></li>
<li class="chapter" data-level="3.2" data-path="linreg.html"><a href="linreg.html#OLS"><i class="fa fa-check"></i><b>3.2</b> Ordinary Least Squares (OLS) Estimator</a></li>
<li class="chapter" data-level="3.3" data-path="linreg.html"><a href="linreg.html#pred-resids"><i class="fa fa-check"></i><b>3.3</b> Predictions and Residuals</a></li>
<li class="chapter" data-level="3.4" data-path="linreg.html"><a href="linreg.html#correlation-covariance-and-linearity"><i class="fa fa-check"></i><b>3.4</b> Correlation, Covariance and Linearity</a></li>
<li class="chapter" data-level="3.5" data-path="linreg.html"><a href="linreg.html#analysing-vary"><i class="fa fa-check"></i><b>3.5</b> Analysing <span class="math inline">\(Var(y)\)</span></a></li>
<li class="chapter" data-level="3.6" data-path="linreg.html"><a href="linreg.html#assessing-the-goodness-of-fit"><i class="fa fa-check"></i><b>3.6</b> Assessing the <em>Goodness of Fit</em></a></li>
<li class="chapter" data-level="3.7" data-path="linreg.html"><a href="linreg.html#an-example-a-log-wage-equation"><i class="fa fa-check"></i><b>3.7</b> An Example: A Log Wage Equation</a></li>
<li class="chapter" data-level="3.8" data-path="linreg.html"><a href="linreg.html#scaling-regressions"><i class="fa fa-check"></i><b>3.8</b> Scaling Regressions</a></li>
<li class="chapter" data-level="3.9" data-path="linreg.html"><a href="linreg.html#a-particular-rescaling-the-log-transform"><i class="fa fa-check"></i><b>3.9</b> A Particular Rescaling: The <span class="math inline">\(\log\)</span> Transform</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="multiple-reg.html"><a href="multiple-reg.html"><i class="fa fa-check"></i><b>4</b> Multiple Regression</a><ul>
<li class="chapter" data-level="4.1" data-path="multiple-reg.html"><a href="multiple-reg.html#ceteris"><i class="fa fa-check"></i><b>4.1</b> All Else Equal</a></li>
<li class="chapter" data-level="4.2" data-path="multiple-reg.html"><a href="multiple-reg.html#multicol"><i class="fa fa-check"></i><b>4.2</b> Multicolinearity</a></li>
<li class="chapter" data-level="4.3" data-path="multiple-reg.html"><a href="multiple-reg.html#log-wage-equation"><i class="fa fa-check"></i><b>4.3</b> Log Wage Equation</a></li>
<li class="chapter" data-level="4.4" data-path="multiple-reg.html"><a href="multiple-reg.html#make-preds"><i class="fa fa-check"></i><b>4.4</b> How To Make Predictions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="categorical-vars.html"><a href="categorical-vars.html"><i class="fa fa-check"></i><b>5</b> Categorial Variables</a><ul>
<li class="chapter" data-level="5.1" data-path="categorical-vars.html"><a href="categorical-vars.html#the-binary-regressor-case"><i class="fa fa-check"></i><b>5.1</b> The Binary Regressor Case</a></li>
<li class="chapter" data-level="5.2" data-path="categorical-vars.html"><a href="categorical-vars.html#dummy-and-continuous-variables"><i class="fa fa-check"></i><b>5.2</b> Dummy and Continuous Variables</a></li>
<li class="chapter" data-level="5.3" data-path="categorical-vars.html"><a href="categorical-vars.html#categorical-variables-in-r-factor"><i class="fa fa-check"></i><b>5.3</b> Categorical Variables in <code>R</code>: <code>factor</code></a></li>
<li class="chapter" data-level="5.4" data-path="categorical-vars.html"><a href="categorical-vars.html#interactions"><i class="fa fa-check"></i><b>5.4</b> Interactions</a></li>
<li class="chapter" data-level="5.5" data-path="categorical-vars.html"><a href="categorical-vars.html#unobserved-individual-heterogeneity"><i class="fa fa-check"></i><b>5.5</b> (Unobserved) Individual Heterogeneity</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="std-errors.html"><a href="std-errors.html"><i class="fa fa-check"></i><b>6</b> Standard Errors</a><ul>
<li class="chapter" data-level="6.1" data-path="std-errors.html"><a href="std-errors.html#what-is-true-what-are-statistical-models"><i class="fa fa-check"></i><b>6.1</b> What is <em>true</em>? What are Statistical Models?</a></li>
<li class="chapter" data-level="6.2" data-path="std-errors.html"><a href="std-errors.html#class-reg"><i class="fa fa-check"></i><b>6.2</b> The Classical Regression Model</a></li>
<li class="chapter" data-level="6.3" data-path="std-errors.html"><a href="std-errors.html#back-to-sampling"><i class="fa fa-check"></i><b>6.3</b> Back to Sampling</a></li>
<li class="chapter" data-level="6.4" data-path="std-errors.html"><a href="std-errors.html#hypothesis-testing"><i class="fa fa-check"></i><b>6.4</b> Hypothesis Testing</a></li>
<li class="chapter" data-level="6.5" data-path="std-errors.html"><a href="std-errors.html#whats-in-my-model-and-what-is-not"><i class="fa fa-check"></i><b>6.5</b> What’s in my model? (And what is not?)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="IV.html"><a href="IV.html"><i class="fa fa-check"></i><b>7</b> Instrumental Variables</a><ul>
<li class="chapter" data-level="7.1" data-path="IV.html"><a href="IV.html#simultaneity-bias"><i class="fa fa-check"></i><b>7.1</b> Simultaneity Bias</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>8</b> Projects</a><ul>
<li class="chapter" data-level="8.1" data-path="projects.html"><a href="projects.html#opp-atlas"><i class="fa fa-check"></i><b>8.1</b> Opportunity Atlas</a></li>
<li class="chapter" data-level="8.2" data-path="projects.html"><a href="projects.html#trade-exercise"><i class="fa fa-check"></i><b>8.2</b> Trade Exercise</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Econometrics with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="categorical-vars" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Categorial Variables</h1>
<p>Up until now, we have encountered only examples with <em>continuous</em> variables <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>, that is, <span class="math inline">\(x,y \in \mathbb{R}\)</span>, so that a typical observation could have been <span class="math inline">\((y_i,x_i) = (1.5,5.62)\)</span>. There are many situations where it makes sense to think about the data in terms of <em>categories</em>, rather than continuous numbers. For example, whether an observation <span class="math inline">\(i\)</span> is <em>male</em> or <em>female</em>, whether a pixel on a screen is <em>black</em> or <em>white</em>, and whether a good was produced in <em>France</em>, <em>Germany</em>, <em>Italy</em>, <em>China</em> or <em>Spain</em> are all categorical classifications of data.</p>
<p>Probably the simplest type of categorical variable is the <em>binary</em>, <em>boolean</em>, or just <em>dummy</em> variable. As the name suggests, it can take on only two values, <code>0</code> and <code>1</code>, or <code>TRUE</code> and <code>FALSE</code>.</p>
<div id="the-binary-regressor-case" class="section level2">
<h2><span class="header-section-number">5.1</span> The Binary Regressor Case</h2>
<p>Even though this is an extremely parsimonious way of encoding that, it is a very powerful tool that allows us to represent that a certain observation <span class="math inline">\(i\)</span> <strong>is a member</strong> of a certain category <span class="math inline">\(j\)</span>. For example, let’s imagine we have income data on males and females, and we would create a variable called <code>is.male</code> that is <code>TRUE</code> whenever <span class="math inline">\(i\)</span> is male, <code>FALSE</code> otherwise, and similarly for women. For example, to encode whether subject <span class="math inline">\(i\)</span> is male, one could do this:</p>
<span class="math display">\[\begin{align*}
\text{is.male}_i &amp;=  \begin{cases}
                    1 &amp; \text{if }i\text{ is male} \\
                    0 &amp; \text{if }i\text{ is not male}. \\
                 \end{cases}, \\
\end{align*}\]</span>
<p>and similarly for females, we’d have</p>
<span class="math display">\[\begin{align*}
\text{is.female}_i &amp;=  \begin{cases}
                    1 &amp; \text{if }i\text{ is female} \\
                    0 &amp; \text{if }i\text{ is not female}. \\
                 \end{cases} \\
\end{align*}\]</span>
<p>By definition, we have just introduced a linear dependence into our dataset. It will always be true that <span class="math inline">\(\text{is.male}_i + \text{is.female}_i = 1\)</span>. This is because dummy variables are based on data being mutually exclusively categorized - here, you are either male or female.<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a> This should immediately remind you of section <a href="multiple-reg.html#multicol">4.2</a> where we introduced <em>multicolinearity</em>. A regression of income on both of our variables like this</p>
<p><span class="math display">\[
y_i = b_0 + b_1 \text{is.female}_i + b_2 \text{is.male}_i + e_i
\]</span> would be invalid because of perfect colinearity between <span class="math inline">\(\text{is.female}_i\)</span> and <span class="math inline">\(\text{is.male}_i\)</span>. The solution to this is pragmatic and simple:</p>
<div class="tip">
<p>
In dummy variable regressions, we remove one category from the regression (for example here: <code>is.male</code>) and call it the <em>reference category</em>. The effect of being <em>male</em> is absorbed in the intercept. The coefficient on the remaining categories measures the <em>difference</em> in mean outcome with respect to the reference category.
</p>
</div>
<p><br></p>
<p>Now let’s try this out. We start by creating the female indicator as above,</p>
<p><span class="math display">\[
\text{is.female}_i = \begin{cases}
          1 &amp; \text{if }i\text{ is female} \\
            0 &amp; \text{if }i\text{ is not female}. \\
   \end{cases}
\]</span> and let’s suppose that <span class="math inline">\(y_i\)</span> is a measure of <span class="math inline">\(i\)</span>’s annual labor income. Our model is</p>
<span class="math display" id="eq:dummy-reg">\[\begin{equation}
y_i = b_0 + b_1 \text{is.female}_i + e_i \tag{5.1}
\end{equation}\]</span>
<p>and here is how we estimate this in <code>R</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># x = sample(x = c(0, 1), size = n, replace = T)</span>
dta<span class="op">$</span>is.female =<span class="st"> </span><span class="kw">factor</span>(x)  <span class="co"># convert x to factor</span>
dummy_reg =<span class="st"> </span><span class="kw">lm</span>(y<span class="op">~</span>is.female,dta)
<span class="kw">summary</span>(dummy_reg)</code></pre></div>
<pre><code>#OUT&gt; 
#OUT&gt; Call:
#OUT&gt; lm(formula = y ~ is.female, data = dta)
#OUT&gt; 
#OUT&gt; Residuals:
#OUT&gt;     Min      1Q  Median      3Q     Max 
#OUT&gt; -2.4253 -0.6551  0.1321  0.7217  2.8129 
#OUT&gt; 
#OUT&gt; Coefficients:
#OUT&gt;             Estimate Std. Error t value Pr(&gt;|t|)    
#OUT&gt; (Intercept)   2.0568     0.2125   9.680 7.27e-13 ***
#OUT&gt; is.female1   -3.0169     0.3203  -9.418 1.74e-12 ***
#OUT&gt; ---
#OUT&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
#OUT&gt; 
#OUT&gt; Residual standard error: 1.124 on 48 degrees of freedom
#OUT&gt; Multiple R-squared:  0.6489,  Adjusted R-squared:  0.6416 
#OUT&gt; F-statistic:  88.7 on 1 and 48 DF,  p-value: 1.737e-12</code></pre>
<p>Notice that <code>R</code> displays the <em>level</em> of the factor to which coefficient <span class="math inline">\(b_1\)</span> belongs here, i.e. <code>is.female1</code> means this coefficient is on level <code>is.female = 1</code> - the reference level is <code>is.female = 0</code>, and it has no separate coefficient. Also interesting is that <span class="math inline">\(b_1\)</span> is equal to the difference in conditional means between male and female</p>
<p><span class="math display">\[b_1 = E[y|\text{is.female}=1] - E[y|\text{is.female}=0]=-3.0169.\]</span></p>
<div class="note">
<p>
A dummy variable measures the difference or the <em>offset</em> in the mean of the response variable, <span class="math inline"><span class="math inline">\(E[y]\)</span></span>, <strong>conditional</strong> on <span class="math inline"><span class="math inline">\(x\)</span></span> belonging to some category - relative to a baseline category. In our artificial example, the coefficient <span class="math inline"><span class="math inline">\(b_1\)</span></span> informs us that women earn on average 3.756 units less than men.
</p>
</div>
<p><br></p>
<p>It is instructive to reconsider this example graphically:</p>
<div class="figure" style="text-align: center"><span id="fig:x-zero-one"></span>
<img src="ScPoEconometrics_files/figure-html/x-zero-one-1.png" alt="regressing $y \in \mathbb{R}$ on $\text{is.female}_i \in \{0,1\}$. The blue line is $E[y]$, the red arrow is the size of $b_1$. Which is the same as the slope of the regression line in this case and the difference in conditional means!" width="672" />
<p class="caption">
Figure 5.1: regressing <span class="math inline">\(y \in \mathbb{R}\)</span> on <span class="math inline">\(\text{is.female}_i \in \{0,1\}\)</span>. The blue line is <span class="math inline">\(E[y]\)</span>, the red arrow is the size of <span class="math inline">\(b_1\)</span>. Which is the same as the slope of the regression line in this case and the difference in conditional means!
</p>
</div>
<p>In figure <a href="categorical-vars.html#fig:x-zero-one">5.1</a> we see that this regression simplifies to the straight line connecting the mean, or the <em>expected value</em> of <span class="math inline">\(y\)</span> when <span class="math inline">\(\text{is.female}_i = 0\)</span>, i.e. <span class="math inline">\(E[y|\text{is.female}_i=0]\)</span>, to the mean when <span class="math inline">\(\text{is.female}_i=1\)</span>, i.e. <span class="math inline">\(E[y|\text{is.female}_i=1]\)</span>. It is useful to remember that the <em>unconditional mean</em> of <span class="math inline">\(y\)</span>, i.e. <span class="math inline">\(E[y]\)</span>, is going to be the result of regressing <span class="math inline">\(y\)</span> only on an intercept, illustrated by the blue line. This line will always lie in between both conditional means. As indicated by the red arrow, the estimate of the coefficient on the dummy, <span class="math inline">\(b_1\)</span>, is equal to the difference in conditional means for both groups. You should look at our app now to deepen your understanding of what’s going on here:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ScPoEconometrics)
<span class="kw">launchApp</span>(<span class="st">&quot;reg_dummy&quot;</span>)</code></pre></div>
</div>
<div id="dummy-and-continuous-variables" class="section level2">
<h2><span class="header-section-number">5.2</span> Dummy and Continuous Variables</h2>
<p>What happens if there are more predictors than just the dummy variable in a regression? For example, what if instead we had</p>
<span class="math display" id="eq:dummy-reg2">\[\begin{equation}
y_i = b_0 + b_1 \text{is.female}_i + b_2 \text{exper}_i + e_i \tag{5.2}
\end{equation}\]</span>
<p>where <span class="math inline">\(\text{exper}_i\)</span> would measure years of experience in the labor market? As above, the dummy variable acts as an intercept shifter. We have</p>
<span class="math display">\[\begin{equation}
y_i =  \begin{cases}
b_0 + b_1 + b_2 \times \text{exper}_i + e_i &amp; \text{if is.female=1} \\
b_0  + \hphantom{b_1} +b_2 \times \text{exper}_i + e_i &amp; \text{if is.female=0}
\end{cases}
\end{equation}\]</span>
<p>so that the intercept is <span class="math inline">\(b_0 + b_1\)</span> for women but <span class="math inline">\(b_0\)</span> for men. We will see this in the real-world example below, but for now let’s see the effect of switching the dummy <em>on</em> and <em>off</em> in this app:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ScPoEconometrics)
<span class="kw">launchApp</span>(<span class="st">&quot;reg_dummy_example&quot;</span>)</code></pre></div>
</div>
<div id="categorical-variables-in-r-factor" class="section level2">
<h2><span class="header-section-number">5.3</span> Categorical Variables in <code>R</code>: <code>factor</code></h2>
<p><code>R</code> has extensive support for categorical variables built-in. The relevant data type representing a categorical variable is called <code>factor</code>. We encountered them as basic data types in section <a href="R-intro.html#data-types">1.8</a> already, but it is worth repeating this here. We have seen that a factor <em>categorizes</em> a usually small number of numeric values by <em>labels</em>, as in this example which is similar to what I used to create regressor <code>is.female</code> for the above regression:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">is.female =<span class="st"> </span><span class="kw">factor</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">TRUE</span>))
is.female</code></pre></div>
<pre><code>#OUT&gt; [1] FALSE TRUE  TRUE  FALSE
#OUT&gt; Levels: FALSE TRUE</code></pre>
<p>You can see the result is a vector object of type <code>factor</code> with 4 entries, whereby <code>0</code> is represented as <code>FALSE</code> and <code>1</code> as <code>TRUE</code>. An other example could be if we wanted to record a variable <em>sex</em> instead, and we could do</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">factor</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;male&quot;</span>,<span class="st">&quot;female&quot;</span>))
sex</code></pre></div>
<pre><code>#OUT&gt; [1] male   female female male  
#OUT&gt; Levels: male female</code></pre>
<p>You can see that this is almost identical, just the <em>labels</em> are different.</p>
<div id="more-levels" class="section level3">
<h3><span class="header-section-number">5.3.1</span> More Levels</h3>
<p>We can go beyond <em>binary</em> categorical variables such as <code>TRUE</code> vs <code>FALSE</code>. For example, suppose that <span class="math inline">\(x\)</span> measures educational attainment, i.e. it is now something like <span class="math inline">\(x_i \in \{\text{high school,some college,BA,MSc}\}\)</span>. In <code>R</code> parlance, <em>high school, some college, BA, MSc</em> are the <strong>levels of factor <span class="math inline">\(x\)</span></strong>. A straightforward extension of the above would dictate to create one dummy variable for each category (or level), like</p>
<span class="math display">\[\begin{align*}
\text{has.HS}_i &amp;= \mathbf{1}[x_i==\text{high school}] \\
\text{has.someCol}_i &amp;= \mathbf{1}[x_i==\text{some college}] \\
\text{has.BA}_i &amp;= \mathbf{1}[x_i==\text{BA}] \\
\text{has.MSc}_i &amp;= \mathbf{1}[x_i==\text{MSc}] 
\end{align*}\]</span>
<p>but you can see that this is cumbersome. There is a better solution for us available:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">factor</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">4</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;HS&quot;</span>,<span class="st">&quot;someCol&quot;</span>,<span class="st">&quot;BA&quot;</span>,<span class="st">&quot;MSc&quot;</span>))</code></pre></div>
<pre><code>#OUT&gt; [1] HS      HS      someCol MSc     BA      MSc    
#OUT&gt; Levels: HS someCol BA MSc</code></pre>
<p>Notice here that <code>R</code> will apply the labels in increasing order the way you supplied it (i.e. a numerical value <code>4</code> will correspond to “MSc”, no matter the ordering in <code>x</code>.)</p>
</div>
<div id="factors" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Log Wages and Dummies</h3>
<p>The above developed <code>factor</code> terminology fits neatly into <code>R</code>’s linear model fitting framework. Let us illustrate the simplest use by way of example.</p>
<p>Going back to our wage example, let’s say that a worker’s wage depends on their education as well as their sex:</p>
<span class="math display" id="eq:wage-sex">\[\begin{equation}
\ln w_i = b_0 + b_1 educ_i + b_2 female_i + e_i \tag{5.3}
\end{equation}\]</span>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;wage1&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;wooldridge&quot;</span>)
wage1<span class="op">$</span>female =<span class="st"> </span><span class="kw">as.factor</span>(wage1<span class="op">$</span>female)  <span class="co"># convert 0-1 to factor</span>
lm_w =<span class="st"> </span><span class="kw">lm</span>(lwage <span class="op">~</span><span class="st"> </span>educ, <span class="dt">data =</span> wage1)
lm_w_sex =<span class="st"> </span><span class="kw">lm</span>(lwage <span class="op">~</span><span class="st"> </span>educ <span class="op">+</span><span class="st"> </span>female, <span class="dt">data =</span> wage1)
stargazer<span class="op">::</span><span class="kw">stargazer</span>(lm_w,lm_w_sex,<span class="dt">type =</span> <span class="st">&quot;html&quot;</span>)</code></pre></div>
<table style="text-align:center">
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
lwage
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
educ
</td>
<td>
0.083<sup>***</sup>
</td>
<td>
0.077<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.008)
</td>
<td>
(0.007)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
female1
</td>
<td>
</td>
<td>
-0.361<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(0.039)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
0.584<sup>***</sup>
</td>
<td>
0.826<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.097)
</td>
<td>
(0.094)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
526
</td>
<td>
526
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.186
</td>
<td>
0.300
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.184
</td>
<td>
0.298
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
0.480 (df = 524)
</td>
<td>
0.445 (df = 523)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
119.582<sup>***</sup> (df = 1; 524)
</td>
<td>
112.189<sup>***</sup> (df = 2; 523)
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="2" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
<p>We know the results from column (1) very well by now. How does the relationship change if we include the <code>female</code> indicator? Remember from above that <code>female</code> is a <code>factor</code> with two levels, <em>0</em> and <em>1</em>, where <em>1</em> means <em>that’s a female</em>. We see in the above output that <code>R</code> included a regressor called <code>female1</code>. This is a combination of the variable name <code>female</code> and the level which was included in the regression. In other words, <code>R</code> chooses a <em>reference category</em> (by default the first of all levels by order of appearance), which is excluded - here this is <code>female==0</code>. The interpretation is that <span class="math inline">\(b_2\)</span> measures the effect of being female <em>relative</em> to being male. <code>R</code> automatically creates a dummy variable for each potential level, excluding the first category.</p>
<div class="figure" style="text-align: center"><span id="fig:wage-plot"></span>
<img src="ScPoEconometrics_files/figure-html/wage-plot-1.png" alt="log wage vs educ. Right panel with female dummy." width="672" />
<p class="caption">
Figure 5.2: log wage vs educ. Right panel with female dummy.
</p>
</div>
<p>Figure <a href="categorical-vars.html#fig:wage-plot">5.2</a> illustrates this. The left panel is our previous model. The right panel adds the <code>female</code> dummy. You can see that both male and female have the same upward sloping regression line. But you can also see that there is a parallel downward shift from male to female line. The estimate of <span class="math inline">\(b_2 = -0.36\)</span> is the size of the downward shift.</p>
</div>
</div>
<div id="interactions" class="section level2">
<h2><span class="header-section-number">5.4</span> Interactions</h2>
<p>Sometimes it is useful to let the slope of a certain variable to be dependent on the value of <em>another</em> regressor. For example consider a model for the sales prices of houses, where <code>area</code> is the livable surface of the property, and <code>age</code> is its age:</p>
<span class="math display" id="eq:price-interact">\[\begin{equation}
\log(price) = b_0 + b_1 \text{area} + b_2 \text{age} + b_3 (\text{area} \times \text{age}) + e  \tag{5.4}
\end{equation}\]</span>
<p>In that model, the partial effect of <code>area</code> on <code>log(price)</code>, keeping all other variables fixed, is</p>
<span class="math display">\[\begin{equation}
\frac{\partial \log(price)}{\partial \text{area}} = b_1 + b_3 (\text{age}) 
\end{equation}\]</span>
<p>If we find that <span class="math inline">\(b_3 &gt; 0\)</span> in a regression, we conclude that the size of a house values more in older houses. We call <span class="math inline">\(b_3\)</span> the <strong>interaction effect</strong> between area and age. Let’s look at that regression model now.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(hprice3, <span class="dt">package =</span> <span class="st">&quot;wooldridge&quot;</span>)
<span class="kw">summary</span>(<span class="kw">lm</span>(lprice <span class="op">~</span><span class="st"> </span>area<span class="op">*</span>age, <span class="dt">data =</span> hprice3))</code></pre></div>
<pre><code>#OUT&gt; 
#OUT&gt; Call:
#OUT&gt; lm(formula = lprice ~ area * age, data = hprice3)
#OUT&gt; 
#OUT&gt; Residuals:
#OUT&gt;      Min       1Q   Median       3Q      Max 
#OUT&gt; -1.27226 -0.16538 -0.00298  0.20673  0.83985 
#OUT&gt; 
#OUT&gt; Coefficients:
#OUT&gt;               Estimate Std. Error t value Pr(&gt;|t|)    
#OUT&gt; (Intercept)  1.071e+01  6.633e-02 161.448  &lt; 2e-16 ***
#OUT&gt; area         3.647e-04  2.875e-05  12.686  &lt; 2e-16 ***
#OUT&gt; age         -7.377e-03  1.358e-03  -5.434  1.1e-07 ***
#OUT&gt; area:age     9.168e-07  4.898e-07   1.872   0.0622 .  
#OUT&gt; ---
#OUT&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
#OUT&gt; 
#OUT&gt; Residual standard error: 0.2925 on 317 degrees of freedom
#OUT&gt; Multiple R-squared:  0.5586,  Adjusted R-squared:  0.5545 
#OUT&gt; F-statistic: 133.7 on 3 and 317 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>In this instance, we see that indeed there is a small positive interaction between <code>area</code> and <code>age</code> on the sales price: even though <code>age</code> in isolation decreases the sales value, bigger houses command a small premium if they are older.</p>
<div id="interactions-with-dummies-differential-slopes" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Interactions with Dummies: Differential Slopes</h3>
<p>It is straightforward to extend the interactions logic to allow not only for different <em>intercepts</em>, but also different <em>slopes</em> for each subgroup in a dataset. Let’s go back to our dataset of wages from section <a href="categorical-vars.html#factors">5.3.2</a> above. Now that we know how to create and interaction between two variables, we can easily modify equation <a href="categorical-vars.html#eq:wage-sex">(5.3)</a> like this:</p>
<span class="math display" id="eq:wage-sex2">\[\begin{equation}
\ln w = b_0 + b_1 \text{female} + b_2 \text{educ} + b_3 (\text{female} \times \text{educ}) + e \tag{5.5}
\end{equation}\]</span>
<p>The only peculiarity here is that <code>female</code> is a factor with levels <code>0</code> and <code>1</code>: i.e. the interaction term <span class="math inline">\(b_3\)</span> will be zero for all men. Similarly to above, we can test whether there are indeed different returns to education or men and women by looking at the estimated value <span class="math inline">\(b_3\)</span>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lm_w_interact &lt;-<span class="st"> </span><span class="kw">lm</span>(lwage <span class="op">~</span><span class="st"> </span>educ <span class="op">*</span><span class="st"> </span>female , <span class="dt">data =</span> wage1)  <span class="co"># R expands to full interactions model</span>
<span class="kw">summary</span>(lm_w_interact)</code></pre></div>
<pre><code>#OUT&gt; 
#OUT&gt; Call:
#OUT&gt; lm(formula = lwage ~ educ * female, data = wage1)
#OUT&gt; 
#OUT&gt; Residuals:
#OUT&gt;      Min       1Q   Median       3Q      Max 
#OUT&gt; -2.02673 -0.27468 -0.03721  0.26221  1.34740 
#OUT&gt; 
#OUT&gt; Coefficients:
#OUT&gt;                Estimate Std. Error t value Pr(&gt;|t|)    
#OUT&gt; (Intercept)   8.260e-01  1.181e-01   6.997 8.08e-12 ***
#OUT&gt; educ          7.723e-02  8.988e-03   8.593  &lt; 2e-16 ***
#OUT&gt; female1      -3.601e-01  1.854e-01  -1.942   0.0527 .  
#OUT&gt; educ:female1 -6.408e-05  1.450e-02  -0.004   0.9965    
#OUT&gt; ---
#OUT&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
#OUT&gt; 
#OUT&gt; Residual standard error: 0.4459 on 522 degrees of freedom
#OUT&gt; Multiple R-squared:  0.3002,  Adjusted R-squared:  0.2962 
#OUT&gt; F-statistic: 74.65 on 3 and 522 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>We will in the next chapter learn that the estimate for <span class="math inline">\(b_3\)</span> on the interaction <code>educ:female1</code> is difficult for us to distinguish from zero in a statistical sense; Hence for now we conclude that there are <em>no</em> significantly different returns in education for men and women in this data. This is easy to verify visually in this plot, where we are unable to detect a difference in slopes in the right panel.</p>
<div class="figure" style="text-align: center"><span id="fig:wage-plot2"></span>
<img src="ScPoEconometrics_files/figure-html/wage-plot2-1.png" alt="log wage vs educ. Right panel allows slopes to be different - turns out they are not!" width="672" />
<p class="caption">
Figure 5.3: log wage vs educ. Right panel allows slopes to be different - turns out they are not!
</p>
</div>
</div>
</div>
<div id="unobserved-individual-heterogeneity" class="section level2">
<h2><span class="header-section-number">5.5</span> (Unobserved) Individual Heterogeneity</h2>
<p>Finally, dummary variables are sometimes very important to account for spurious relationships in that data. Consider the following (artificial example):</p>
<ol style="list-style-type: decimal">
<li>Suppose we collected data on hourly wage data together with a the number of hours worked for a set of individuals.</li>
<li>We plot want to investigate labour supply behaviour of those individuals, hence we run regression <code>hours_worked ~ wage</code>.</li>
<li>We expect to get a positive coefficient on <code>wage</code>: the higher the wage, the more hours worked.</li>
<li>You know that individuals are members of either group <code>g=0</code> or <code>g=1</code>.</li>
</ol>
<p><img src="ScPoEconometrics_files/figure-html/unnamed-chunk-165-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Here we observe a slightly negative relationship: higher wages are associated with fewer hours worked? Maybe. But what is this, there is a group identifier in this data! Let’s use this and include <code>g</code> as a dummy in the regression - suppose <code>g</code> encodes male and female.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-166"></span>
<img src="ScPoEconometrics_files/figure-html/unnamed-chunk-166-1.png" alt="Left and right panel exhibit the same data. The right panel controls for group composition." width="672" />
<p class="caption">
Figure 5.4: Left and right panel exhibit the same data. The right panel controls for group composition.
</p>
</div>
<p>This is an artificial example; yet it shows that you can be severly misled if you don’t account for group-specific effects in your data. The problem is particularly accute if we <em>don’t know group membership</em> - we can then resort to advanced methods that are beyond the scope of this course to <em>estimate</em> which group each individual belongs to. If we <em>do know</em> group membership, however, it is good practice to include a group dummy so as to control for group effects.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p>There are <a href="https://en.wikipedia.org/wiki/Transgender">transgender</a> individuals where this example will not apply.<a href="categorical-vars.html#fnref5">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="multiple-reg.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="std-errors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ScPoEcon/ScPoEconometrics/edit/master/05-Categorial-Vars.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["ScPoEconometrics.pdf", "ScPoEconometrics.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
