<!DOCTYPE html>
<html>
<head>
  <title>ScPoEconometrics5</title>

  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />



  <meta name="date" content="2019-01-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'ScPoEconometrics5',
                        useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                        favIcon: 'chapter5_files/logo.png',
              },

      // Author information
      presenters: [
            {
        name:  'Florian Oswald' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <link href="chapter5_files/ioslides-13.5.1/fonts/fonts.css" rel="stylesheet" />
  <link href="chapter5_files/ioslides-13.5.1/theme/css/default.css" rel="stylesheet" />
  <link href="chapter5_files/ioslides-13.5.1/theme/css/phone.css" rel="stylesheet" />
  <script src="chapter5_files/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
  <script src="chapter5_files/ioslides-13.5.1/js/prettify/prettify.js"></script>
  <script src="chapter5_files/ioslides-13.5.1/js/prettify/lang-r.js"></script>
  <script src="chapter5_files/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
  <script src="chapter5_files/ioslides-13.5.1/js/hammer.js"></script>
  <script src="chapter5_files/ioslides-13.5.1/js/slide-controller.js"></script>
  <script src="chapter5_files/ioslides-13.5.1/js/slide-deck.js"></script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    summary {
      display: list-item;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }

    slides > slide:not(.nobackground):before {
      font-size: 12pt;
      content: "";
      position: absolute;
      bottom: 20px;
      left: 60px;
      background: url(chapter5_files/logo.png) no-repeat 0 50%;
      -webkit-background-size: 30px 30px;
      -moz-background-size: 30px 30px;
      -o-background-size: 30px 30px;
      background-size: 30px 30px;
      padding-left: 40px;
      height: 30px;
      line-height: 1.9;
    }
  </style>


</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <aside class="gdbar"><img src="chapter5_files/logo.png"></aside>
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
            <p style="margin-top: 6px; margin-left: -2px;">2019-01-16</p>
          </hgroup>
  </slide>

<style>
.forceBreak { -webkit-column-break-after: always; break-after: column; }
</style>

<slide class=""><hgroup><h2>Categorical Variables</h2></hgroup><article  id="categorical-variables">

<ul class = 'build'>
<li>We have seen different data types in the first session.</li>
<li>One of them was <code>factor</code>, representing <strong>categorical</strong> data:</li>
<li>A person is <em>male</em> or <em>female</em></li>
<li>A plane is <em>passenger</em>, <em>cargo</em> or <em>military</em></li>
<li>Some good is produced in <em>Spain</em>, <em>France</em>, <em>China</em> or <em>UK</em>.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Binary/Boolean/Dummy</h2></hgroup><article  id="binarybooleandummy">

<ul>
<li>A <em>dummy</em> variable is either <code>TRUE</code> or <code>FALSE</code> (or <code>0</code> or <code>1</code>).</li>
<li>We use dummies to mark <strong>category membership</strong>: if member, then <code>TRUE</code>.</li>
<li>for example, \[
  \begin{aligned}
\text{is.male}_i &amp;=  \begin{cases}
                1 &amp; \text{if }i\text{ is male} \\
                0 &amp; \text{if }i\text{ is not male}. \\
             \end{cases} \\
  \end{aligned}
  \]</li>
<li>Notice that whether <code>0</code> corresponds to <code>TRUE</code> or <code>FALSE</code> is up to you. Just be consistent!</li>
</ul>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>Single Binary Regressor</h2></hgroup><article  id="single-binary-regressor">

</article></slide><slide class=""><hgroup><h2>Dummy Variables</h2></hgroup><article  id="dummy-variables">

<ul class = 'build'>
<li>We defined <code>is.male</code>. Let&#39;s define its pendant.</li>
<li>That is, for females, \[
\begin{aligned}
\text{is.female}_i &amp;=  \begin{cases}
1 &amp; \text{if }i\text{ is female} \\
0 &amp; \text{if }i\text{ is not female} \\
\end{cases} \\
\end{aligned}
\]</li>
<li>let&#39;s all create this dataset:</li>
</ul>

<pre class = 'prettyprint lang-r'>df1 = data.frame(income=c(3000,5000,7500,3500),
             sex=c(&quot;male&quot;,&quot;female&quot;,&quot;male&quot;,&quot;female&quot;))</pre>

</article></slide><slide class=""><hgroup><h2>Falling into The Dummy Variable Trap</h2></hgroup><article  id="falling-into-the-dummy-variable-trap">

<ul>
<li>Let&#39;s run regression \(y = b_0 + b_1 is.male + b_2 is.female\)</li>
<li>First, we create those dummy variables:</li>
</ul>

<pre class = 'prettyprint lang-r'>df1$is.male = df1$sex == &quot;male&quot;
df1$is.female = df1$sex == &quot;female&quot;</pre>

<ul>
<li>and then let&#39;s run this:</li>
</ul>

<pre class = 'prettyprint lang-r'>lm(income ~ is.male + is.female,df1)</pre>

<ul>
<li>What do you see? ðŸ¤”</li>
</ul>

</article></slide><slide class=""><hgroup><h2>The Trap: Multicolinearity</h2></hgroup><article  id="the-trap-multicolinearity">

<pre class = 'prettyprint lang-r'>df1$linear_comb = df1$is.male + df1$is.female
df1</pre>

<pre >##   income    sex is.male is.female linear_comb
## 1   3000   male    TRUE     FALSE           1
## 2   5000 female   FALSE      TRUE           1
## 3   7500   male    TRUE     FALSE           1
## 4   3500 female   FALSE      TRUE           1</pre>

<ul>
<li>Oops. <code>is.male + is.female</code> is <strong>always</strong> equal <code>1</code>!</li>
<li>In other words, <code>is.male = 1 - is.female</code>. A <strong>perfect colinearity</strong>!</li>
<li>Multiple regression fails. ðŸ˜ </li>
</ul>

</article></slide><slide class=""><hgroup><h2>Drop One Category</h2></hgroup><article  id="drop-one-category">

<ul>
<li>Notice: Inclusion of both dummies doesn&#39;t add anything</li>
<li>If someone is <code>male</code> they are <em>not</em> <code>female</code>.</li>
<li>So we <strong>drop one of the categories</strong>. Only do \(y = b_0 + b_1 is.female\)</li>
</ul>

<pre class = 'prettyprint lang-r'>lm1 = lm(income ~ is.female,df1)
lm1</pre>

<pre >## 
## Call:
## lm(formula = income ~ is.female, data = df1)
## 
## Coefficients:
##   (Intercept)  is.femaleTRUE  
##          5250          -1000</pre>

</article></slide><slide class=""><hgroup><h2>Interpretation of Dummies</h2></hgroup><article  id="interpretation-of-dummies">

<ul>
<li>We have excluded <code>is.male</code>.</li>
<li>So what&#39;s the effect of being <code>male</code> now?</li>
<li>Well, <em>male</em> means <code>is.female = 0</code>. So <code>male</code> is <strong>subsumed in the intercept</strong>!</li>
<li>At <code>is.female = 0</code>, i.e. \(\widehat{y} = b_0 + b_1 \cdot 0=\) 5250</li>
<li>Coefficient on <code>is.female</code> is \(b_1=\) -1000. It measures the <em>difference in intercept from being female</em>.</li>
<li>That means: \(\widehat{y} = b_0 + b_1 \cdot 1=\) 4250</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Our Dataset in a Picture</h2></hgroup><article  id="our-dataset-in-a-picture">

<p><img src="chapter5_files/figure-html/x-zero-1.png" width="576" style="display: block; margin: auto;" /></p>

</article></slide><slide class=""><hgroup><h2>Regression connects Conditional Means!</h2></hgroup><article  id="regression-connects-conditional-means">

<p><img src="chapter5_files/figure-html/x-zero-one-1.png" width="576" style="display: block; margin: auto;" /></p>

</article></slide><slide class=""><hgroup><h2>\(b_1\) is <em>Difference</em> in Conditional Means</h2></hgroup><article  id="b_1-is-difference-in-conditional-means">

<p><img src="chapter5_files/figure-html/x-zero-two-1.png" width="576" style="display: block; margin: auto;" /></p>

</article></slide><slide class=""><hgroup><h2>Interpretation of Dummy Coefficient \(b_1\)</h2></hgroup><article  id="interpretation-of-dummy-coefficient-b_1">

<ul class = 'build'>
<li>So, we have seen that \[
b_1 = E[Y|\text{is.female}=1] - E[Y|\text{is.female}=0]
\]</li>
<li>This was the meaning of the red arrow.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>App!</h2></hgroup><article  id="app">

<ul>
<li>Time for you to play around with the Binary Regression!</li>
<li>Try to find the best line again!</li>
</ul>

<pre class = 'prettyprint lang-r'>library(ScPoEconometrics)
launchApp(&quot;reg_dummy&quot;)</pre>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>Dummy <em>and</em> \(X\)</h2></hgroup><article  id="dummy-and-x">

</article></slide><slide class=""><hgroup><h2>Dummy and other Regressors</h2></hgroup><article  id="dummy-and-other-regressors">

<ul class = 'build'>
<li>What if we added \(\text{exper}_i\in \mathbb{N}\) to that regression? \[
y_i = b_0 + b_1 \text{is.female}_i + b_2 \text{exper}_i + e_i 
\]</li>
<li>As before, dummy acts as intercept shifter. We have \[
y_i =  \begin{cases}
b_0 + b_1 + b_2 \text{exper}_i + e_i &amp; \text{if is.female=1} \\
b_0 + \hphantom{b_1} + b_2 \text{exper}_i + e_i &amp; \text{if is.female=0}
\end{cases}
\]</li>
<li>intercept is \(b_0 + b_1\) for women but \(b_0\) for men</li>
<li>Slope \(b_2\) <strong>identical</strong> for both!</li>
</ul>

</article></slide><slide class=""><hgroup><h2>App!</h2></hgroup><article  id="app-1">

<pre class = 'prettyprint lang-r'>library(ScPoEconometrics)
launchApp(&quot;reg_dummy_example&quot;)</pre>

</article></slide><slide class=""><hgroup><h2>More than Two Levels: <code>factor</code></h2></hgroup><article  id="more-than-two-levels-factor" class="smaller">

<ul class = 'build'>
<li>Sometimes two categories are not enough.</li>
<li>The <code>R</code> data type <code>factor</code> can represent more than just <code>0</code> and <code>1</code> in terms of categories.</li>
<li>Function <code>factor</code> takes a numeric vector <code>x</code> and a vector of <code>labels</code>. Each value of <code>x</code> is associated to a <code>label</code>:</li>
</ul>

<pre class = 'prettyprint lang-r'>factor(x = c(1,1,2,4,3,4),labels = c(&quot;HS&quot;,&quot;someCol&quot;,&quot;BA&quot;,&quot;MSc&quot;))</pre>

<pre >## [1] HS      HS      someCol MSc     BA      MSc    
## Levels: HS someCol BA MSc</pre>

<ul class = 'build'>
<li><code>factor</code> in an <code>lm</code> object automatically chooses an omitted/reference category!</li>
</ul>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>\(\log\) Transformations</h2></hgroup><article  id="log-transformations">

</article></slide><slide class=""><hgroup><h2>\(\log\) Removes Scale</h2></hgroup><article  id="log-removes-scale">

<ul class = 'build'>
<li>Let \(\alpha\) represent the <em>scale</em> of the regression.</li>
<li>E.g. if \(\alpha=1\), measure in Euros, \(\alpha=\frac{1}{1000}\) in thousands of Euros.</li>
<li>\(\log\) transforming \(x\), we obtain \[
y = b_0 + b_1 \log(\alpha x) = b_0 + \log \alpha  + b_1 \log x 
\] hence, scale \(\alpha\) moves to intercept, slope becomes <em>invariant</em> to it!</li>
</ul>

</article></slide><slide class=""><hgroup><h2>\(\log\) both Outcome and Regressor</h2></hgroup><article  id="log-both-outcome-and-regressor">

<ul class = 'build'>
<li>Now transform both outcome and regressor: \[
\log y = b_0 + b_1 \log x
\]</li>
<li>Then the slope coefficient is \[
b_1 = \frac{d\log y}{d \log x} = \frac{dy/y}{dx/x}
\]</li>
<li>This represents the <strong>elasticity</strong> of \(y\) with respect to \(x\)</li>
<li>\(y\) changes by \(b_1\) percent if \(x\) changes by one percent.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>\(\log\) Transformation only on \(y\)</h2></hgroup><article  id="log-transformation-only-on-y">

<ul class = 'build'>
<li>Now <em>only the outcome</em> is log transformed.</li>
<li>We have a <em>semi-elasticity</em> formulation. \[
\log y = b_0 + b_1 x
\]</li>
<li>Slope coefficient becomes \[
b_1 = \frac{d\log y}{d x}
\]</li>
<li>A one-unit change in \(x\) increases the logarithm of the outcome by \(b_1\) units.</li>
<li>Small \(\Delta x\): exponentiating \(b_1\) approximates effect of \(x\) on <em>level</em> of \(y\). (not on \(\log(y)\))</li>
</ul>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>Estimating a Wage Equation</h2></hgroup><article  id="estimating-a-wage-equation">

</article></slide><slide class=""><hgroup><h2>Wage Equation</h2></hgroup><article  id="wage-equation">

<ul class = 'build'>
<li>Wages \(w\) are often \(\log\)-transformed</li>
<li>\(w\) are non-negative</li>
<li>\(w\) are approximately log-normally distributed (so \(\log(w)\sim N\))</li>
<li>Here is a typical equation: What&#39;s the return of experience? \[
\ln w_i = b_0 + b_1 exp_i + e_i 
\]</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Wage Data</h2></hgroup><article  id="wage-data">

<pre class = 'prettyprint lang-r'>data(Wages,package=&quot;Ecdat&quot;)  # load data
str(Wages)</pre>

<pre >## &#39;data.frame&#39;:    4165 obs. of  12 variables:
##  $ exp    : int  3 4 5 6 7 8 9 30 31 32 ...
##  $ wks    : int  32 43 40 39 42 35 32 34 27 33 ...
##  $ bluecol: Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 1 1 1 1 1 1 1 2 2 2 ...
##  $ ind    : int  0 0 0 0 1 1 1 0 0 1 ...
##  $ south  : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 2 2 2 2 2 2 2 1 1 1 ...
##  $ smsa   : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ married: Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ sex    : Factor w/ 2 levels &quot;female&quot;,&quot;male&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ union  : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 1 1 1 1 1 1 1 1 1 2 ...
##  $ ed     : int  9 9 9 9 9 9 9 11 11 11 ...
##  $ black  : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ lwage  : num  5.56 5.72 6 6 6.06 ...</pre>

</article></slide><slide class=""><hgroup><h2>Estimating Wage Equation</h2></hgroup><article  id="estimating-wage-equation" class="smaller">

<pre class = 'prettyprint lang-r'>lm_w = lm(lwage ~ exp, data = Wages)   # setup fit
summary(lm_w)  # show output</pre>

<pre >## 
## Call:
## lm(formula = lwage ~ exp, data = Wages)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.30153 -0.29144  0.02307  0.27927  1.97171 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 6.5014318  0.0144657  449.44   &lt;2e-16 ***
## exp         0.0088101  0.0006378   13.81   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4513 on 4163 degrees of freedom
## Multiple R-squared:  0.04383,    Adjusted R-squared:  0.0436 
## F-statistic: 190.8 on 1 and 4163 DF,  p-value: &lt; 2.2e-16</pre>

</article></slide><slide class=""><hgroup><h2>Interpreting Results</h2></hgroup><article  id="interpreting-results">

<ul class = 'build'>
<li>\(E[\ln w] = 6.68\) and \(E[w] = 882.93\)</li>
<li>Additional year of experience increases \(E[\ln w]\) by 0.0088.</li>
<li>Approximate effect on \(E[w]=\exp(b_1)=1.009\)</li>
<li>Precise effect is \(100 * (\exp(b_1)-1) = 0.885\)</li>
<li>Anway: Tiny effect! ðŸ˜’</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Results in a Picture</h2></hgroup><article  id="results-in-a-picture">

<p><img src="chapter5_files/figure-html/wage-plot-1.png" width="720" style="display: block; margin: auto;" /></p>

</article></slide><slide class=""><hgroup><h2>Different Intercepts by Gender?</h2></hgroup><article  id="different-intercepts-by-gender">

<ul class = 'build'>
<li>Let&#39;s see if there are important differences by gender in this: \[
\ln w_i = b_0 + b_1 exp_i + b_2 sex_i + e_i 
\]</li>
<li>We just <code>update</code> our <code>lm</code> object as follows:</li>
</ul>

<pre class = 'prettyprint lang-r'>lm_sex = update(lm_w, . ~ . + sex)  
# update lm_w with same LHS, same RHS, but add sex to it</pre>

</article></slide><slide class=""><hgroup><h2>Interpreting Intercepts by Gender</h2></hgroup><article  id="interpreting-intercepts-by-gender" class="columns-2 smaller">

<pre >## 
## Call:
## lm(formula = lwage ~ exp + sex, data = Wages)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.87081 -0.26688  0.01733  0.26336  1.90325 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 6.1257661  0.0223319  274.31   &lt;2e-16 ***
## exp         0.0076134  0.0006082   12.52   &lt;2e-16 ***
## sexmale     0.4501101  0.0210974   21.34   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4286 on 4162 degrees of freedom
## Multiple R-squared:  0.1381, Adjusted R-squared:  0.1377 
## F-statistic: 333.4 on 2 and 4162 DF,  p-value: &lt; 2.2e-16</pre>

<p class="forceBreak">

</p>

<ul class = 'build'>
<li>Notice <code>sexmale</code>! <code>R</code> appends the offset level to the variable name.</li>
<li>Hence, does <em>not</em> display omitted category: there is no <code>sexfemale</code>.</li>
<li><code>female</code> is the <strong>reference category</strong>.</li>
<li>Both groups have the <strong>same slope</strong> on <code>exp</code>.</li>
<li>What does this look like now?</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Picture for Intercepts by Gender</h2></hgroup><article  id="picture-for-intercepts-by-gender">

<p><img src="chapter5_files/figure-html/wage-plot2-1.png" width="720" style="display: block; margin: auto;" /></p></article></slide>


  <slide class="backdrop"></slide>

</slides>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
